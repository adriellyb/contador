<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <title>Contador</title>
</head>

<body>
    <!-- Floating Shapes -->
    <img src="../assets/shape1.png" alt="" class="shape1">
    <img src="../assets/shape2.png" alt="" class="shape2">

    <!-- Content -->
    <div class="box-container">
        <img src="../assets/shape3.png" alt="" class="shape3">
        <h2 class="title-counter">Contador</h2>

        <div class="container-counter">
            <div class="container-timer">
                <h1 class="title-timer">Faltam</h1>
                <div class="text-center" id="count-down-timer"></div>
            </div>
        </div>
        <button class="reiniciar" onclick="goHome()">Reiniciar</button>
    </div>


</body>
<script>
    function zero(num) {
        return num < 10 ? "0" + num : num;
    }

    function startCountDown(duration) {

        let secondsRemaining = duration;
        let countInterval = setInterval(function () {

            dias = parseInt(secondsRemaining / 60 / 60 / 24) + 1;
            horas = parseInt(secondsRemaining / 60 / 60 % 24);
            min = parseInt(secondsRemaining / 60 % 60);
            sec = parseInt(secondsRemaining % 60);

            element = document.querySelector('#count-down-timer');
            element.innerHTML =
                `
            <div class="counter">
                <h1 class="number">${zero(dias)}</h1>
                <h2 class="unidade">dias</h2>
            </div>
            <div class="counter">
                <h1 class="number">${zero(horas)}</h1>
                <h2 class="unidade">horas</h2>
            </div>
            <div class="counter">
                <h1 class="number">${zero(min)}</h1>
                <h2 class="unidade">minutos</h2>
            </div>
            <div class="counter">
                <h1 class="number">${zero(sec)}</h1>
                <h2 class="unidade">segundos</h2>
            </div>
            `;

            secondsRemaining = secondsRemaining - 1;
            if (secondsRemaining < 0) { clearInterval(countInterval) };

        }, 1000);
    }

    var data = localStorage.getItem("data");
    var falta = (new Date(data).getTime() - new Date()) / 1000;

    startCountDown(--falta);

    function goHome() {
        localStorage.removeItem("data")
        window.location = "index.html"
    }
</script>

</html>